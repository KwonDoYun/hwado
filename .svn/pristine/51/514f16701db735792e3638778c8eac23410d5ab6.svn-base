<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper-sia">
	<!-- 유저 등록 -->
	<insert id="registerUser" parameterType="lx.sia.community.vo.UserVO">
		INSERT INTO USERS(user_id, user_pw, user_name, nickname, address1, address2, email, login_date, verify, reg_date)
		values(#{userId}, #{userPw}, #{userName}, #{nickname}, #{address1}, #{address2}, #{email}, #{loginDate}, #{verify}, DATE_ADD(NOW(), INTERVAL 9 HOUR))
	</insert>
	
	<!-- 로그인(암호화) -->
	<select id="login" parameterType="lx.sia.community.vo.UserVO" resultType="lx.sia.community.vo.UserVO">
		SELECT *
		FROM USERS
		WHERE user_id=#{userId}
	</select>
	
	<!-- 로그인일자 갱신 -->
	<update id="userLoginDate">
		UPDATE USERS
		SET login_date = NOW()
		WHERE user_id = #{userId}
	</update>
	
	<!-- 아이디 중복 체크 -->
	<select id="idCheck" resultType="int">
		SELECT COUNT(*)
		FROM USERS
		WHERE user_id=#{userId}
	</select>
	
	<!-- 패스워드 확인 -->
	<select id="pwCheck" resultType="int">
		SELECT COUNT(*)
		FROM USERS
		WHERE user_id=#{userId} AND user_pw=#{userPw}
	</select>
	
	<!-- 패스워드 변경 -->
	<update id="updateUserPw">
		UPDATE USERS
		SET user_pw = #{userPw}
		WHERE user_id = #{userId}
	</update>
	
	<!-- 회원수정 -->
	<update id="userUpdate">
		UPDATE USERS SET
		nickname=#{nickname}, email=#{email}
		WHERE user_id=#{userId}
	</update>
	
	<!-- 프로필 사진 등록  -->
	<update id="setUserImg">
		UPDATE USERS SET
		user_img=#{userImg}, user_thumbimg=#{userThumbimg}
		WHERE user_id=#{userId}
	</update>
	
	<!-- 회원조회 -->
	<select id="getUser" parameterType="lx.sia.community.vo.UserVO" resultType="lx.sia.community.vo.UserVO">
		select *
		from users
	</select>
	
	<!-- 회원등록 -->
    <update id="updateAcMent">
    	UPDATE users
		SET ac_ments = #{acMents}
		WHERE user_id = #{userId};
    </update>
    
    <!-- 회원조회 -->
	<select id="getAcMent" parameterType="lx.sia.community.vo.UserVO" resultType="lx.sia.community.vo.UserVO">
		select ac_ments
		from users
		where user_id = #{userId};
	</select>
	
</mapper>